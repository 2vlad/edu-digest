# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram API –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## üö® –ü–†–û–ë–õ–ï–ú–ê: –ü—É–±–ª–∏–∫—É—é—Ç—Å—è —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–π–¥–∂–µ—Å—Ç—ã

**–ü—Ä–∏—á–∏–Ω–∞:** –°–∏—Å—Ç–µ–º–∞ –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Ä–µ–∞–ª—å–Ω—ã–º Telegram –∫–∞–Ω–∞–ª–∞–º –∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ.

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å Telegram API credentials –≤ Railway.

---

## üîë –®–∞–≥ 1: –ü–æ–ª—É—á–µ–Ω–∏–µ Telegram API Credentials

### 1.1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

1. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ https://my.telegram.org/auth
2. –í–æ–π—Ç–∏ —Å –ø–æ–º–æ—â—å—é –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (—Ç–æ—Ç –∂–µ –∞–∫–∫–∞—É–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —á–∏—Ç–∞—Ç—å –∫–∞–Ω–∞–ª—ã)
3. –í—ã–±—Ä–∞—Ç—å **"API development tools"**
4. –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
   - **App title:** `EdTech News Digest Bot`
   - **Short name:** `edu_digest`
   - **Platform:** `Server`
   - **Description:** `Educational technology news aggregation bot`

### 1.2. –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–ª—é—á–µ–π

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤—ã –ø–æ–ª—É—á–∏—Ç–µ:
- **api_id** - —á–∏—Å–ª–æ–≤–æ–π ID (–Ω–∞–ø—Ä–∏–º–µ—Ä: `12345678`)
- **api_hash** - —Å—Ç—Ä–æ–∫–æ–≤—ã–π —Ö—ç—à (–Ω–∞–ø—Ä–∏–º–µ—Ä: `abcdef123456789...`)

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ - –æ–Ω–∏ –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è –¥–ª—è Railway.

---

## üîß –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ Telegram Bot

### 2.1. –°–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ä–µ–∑ BotFather

1. –ù–∞–π—Ç–∏ @BotFather –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É `/newbot`
3. –í—ã–±—Ä–∞—Ç—å –∏–º—è –±–æ—Ç–∞: `EdTech News Digest`
4. –í—ã–±—Ä–∞—Ç—å username: `edu_digest_news_bot` (–¥–æ–ª–∂–µ–Ω –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è –Ω–∞ `_bot`)

### 2.2. –ü–æ–ª—É—á–µ–Ω–∏–µ Bot Token

BotFather –≤—ã–¥–∞—Å—Ç —Ç–æ–∫–µ–Ω –≤–∏–¥–∞: `123456789:ABCdefGHIjklMNOpqrsTUVwxyz`

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω - –æ–Ω –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –¥–ª—è Railway.

---

## üö¢ –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Railway Environment Variables

–î–æ–±–∞–≤–∏—Ç—å –≤ Railway Dashboard ‚Üí Environment Variables:

```env
# Telegram User API (–¥–ª—è —á—Ç–µ–Ω–∏—è –∫–∞–Ω–∞–ª–æ–≤)
TELEGRAM_API_ID=12345678
TELEGRAM_API_HASH=abcdef123456789abcdef123456789ab

# Telegram Bot API (–¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –¥–∞–π–¥–∂–µ—Å—Ç–æ–≤)  
TELEGRAM_BOT_TOKEN=123456789:ABCdefGHIjklMNOpqrsTUVwxyz
```

---

## üß™ –®–∞–≥ 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –≤ Railway –≤—ã–ø–æ–ª–Ω–∏—Ç—å:

```bash
python test_telegram_api.py
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ Telethon User API connection successful
‚úÖ Successfully read 3 messages from @edtexno
‚úÖ Bot API connection successful
```

**–ï—Å–ª–∏ –æ—à–∏–±–∫–∏:**
```
‚ùå CRITICAL ERROR: Missing Telegram API credentials
‚ùå Telethon User API connection failed
‚ùå Bot API connection failed
```

---

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: "Missing Telegram API credentials"

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ Railway
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Railway service
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –Ω–µ—Ç –æ–ø–µ—á–∞—Ç–æ–∫ –≤ –Ω–∞–∑–≤–∞–Ω–∏—è—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

### –ü—Ä–æ–±–ª–µ–º–∞: "Telethon User API connection failed"

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
1. **–ù–µ–≤–µ—Ä–Ω—ã–µ api_id/api_hash** - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ https://my.telegram.org
2. **–ê–∫–∫–∞—É–Ω—Ç —Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏** - –Ω—É–∂–Ω–∞ –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
3. **–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç** - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ Telegram
4. **–°–µ—Ç–µ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã** - Railway –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Telegram

**–†–µ—à–µ–Ω–∏–µ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:**
```bash
# –õ–æ–∫–∞–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –æ–¥–∏–Ω —Ä–∞–∑ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
cd edu-digest
python -c "
import asyncio
from telethon import TelegramClient
async def auth():
    client = TelegramClient('edu_digest_bot', API_ID, 'API_HASH')
    await client.start()
    print('Authorized!')
asyncio.run(auth())
"
```

### –ü—Ä–æ–±–ª–µ–º–∞: "No messages found in channel"

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
1. **–ö–∞–Ω–∞–ª –ø—Ä–∏–≤–∞—Ç–Ω—ã–π** - –±–æ—Ç –Ω–µ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø–∞
2. **–ö–∞–Ω–∞–ª –Ω–µ–∞–∫—Ç–∏–≤–µ–Ω** - –Ω–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞
3. **–ù–µ–≤–µ—Ä–Ω–æ–µ –∏–º—è –∫–∞–Ω–∞–ª–∞** - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å @username

---

## üéØ –®–∞–≥ 5: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞ –≤ —Ü–µ–ª–µ–≤–æ–π –∫–∞–Ω–∞–ª

### 5.1. –î–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –¥–∞–π–¥–∂–µ—Å—Ç–æ–≤

1. –ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞–Ω–∞–ª `@vestnik_edtech`
2. –î–æ–±–∞–≤–∏—Ç—å –±–æ—Ç–∞ –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
3. –î–∞—Ç—å –ø—Ä–∞–≤–∞:
   - ‚úÖ Post messages
   - ‚úÖ Edit messages
   - ‚ùå Delete messages (–Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

### 5.2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤

–í—ã–ø–æ–ª–Ω–∏—Ç—å —Ç–µ—Å—Ç –ø—É–±–ª–∏–∫–∞—Ü–∏–∏:
```bash
python -c "
import asyncio
from src.telegram_publisher import TelegramPublisher
async def test():
    pub = TelegramPublisher()
    result = await pub.send_digest_to_channel('TEST: Bot API working!', '@vestnik_edtech')
    print(f'Result: {result}')
asyncio.run(test())
"
```

---

## üîÑ –®–∞–≥ 6: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ API:

### 6.1. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–±–æ—Ä –Ω–æ–≤–æ—Å—Ç–µ–π
1. –û—Ç–∫—Ä—ã—Ç—å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å: `https://[railway-url].railway.app`
2. –ù–∞–∂–∞—Ç—å **"–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–±–æ—Ä –Ω–æ–≤–æ—Å—Ç–µ–π"**

### 6.2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
```bash
# –í Railway –∫–æ–Ω—Å–æ–ª–∏
tail -f logs/telegram_reader.log
tail -f logs/news_collector.log
```

**–û–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥–∏ (—É—Å–ø–µ—Ö):**
```
‚úÖ Telethon client authorized successfully
üë§ User: –í–∞—à–µ –ò–º—è (@–≤–∞—à_username)
üì° –ü–æ–ª—É—á–µ–Ω–æ 5 –†–ï–ê–õ–¨–ù–´–• —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ @edtexno
‚úÖ Digest published to @vestnik_edtech
```

**–õ–æ–≥–∏ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö:**
```
‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê: –ù–µ —É–¥–∞–ª–æ—Å—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å Telegram reader
üö´ SIMULATION IS DISABLED IN PRODUCTION - REAL DATA ONLY!
```

---

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
- ‚ùå **–¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–π–¥–∂–µ—Å—Ç—ã –ø—Ä–µ–∫—Ä–∞—Ç—è—Ç—Å—è**
- ‚úÖ **–ë—É–¥—É—Ç –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å—Å—è —Ä–µ–∞–ª—å–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏ –∏–∑ EdTech –∫–∞–Ω–∞–ª–æ–≤**
- ‚úÖ **–°–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ –±–µ–∑ fallback –Ω–∞ —Å–∏–º—É–ª—è—Ü–∏—é**

---

## üÜò –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å Railway Environment Variables** - –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ 3 –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
2. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Railway service** - –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
3. **–í—ã–ø–æ–ª–Ω–∏—Ç—å —Ç–µ—Å—Ç:** `python test_telegram_api.py`
4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏:** Railway ‚Üí Logs ‚Üí –æ—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
5. **–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** –Ω–∞ https://my.telegram.org –µ—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å API

**–í–∞–∂–Ω–æ:** –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º–∞ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ—Ç –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–π–¥–∂–µ—Å—Ç—ã –∏ –Ω–∞—á–Ω–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ!